# MedFlow Supabase Development Configuration
# Copy this to .env.supabase and fill in your Supabase project details.
#
# Find connection details in Supabase Dashboard:
#   Project Settings > Database > Connection string > URI
#
# Setup steps:
#   1. Copy this file: cp deployments/.env.supabase.example deployments/.env.supabase
#   2. Fill in your Supabase credentials below
#   3. Run one-time setup: make supabase-setup
#   4. Change medflow_app password on Supabase and update DB_APP_PASSWORD below
#   5. Run migrations: make dev-supabase migrate-up
#   6. Start services: make dev-supabase

# Environment
MEDFLOW_SERVER_ENVIRONMENT=development

# Supabase project reference (e.g., abcdefghijklmnop)
# SUPABASE_PROJECT_REF=your-project-ref

# Database host (from Supabase Dashboard > Settings > Database)
MEDFLOW_DATABASE_HOST=db.your-project-ref.supabase.co
MEDFLOW_DATABASE_PORT=5432
MEDFLOW_DATABASE_DATABASE=postgres
MEDFLOW_DATABASE_SSL_MODE=require

# Application role (medflow_app — RLS enforced, used by services)
MEDFLOW_DATABASE_USER=medflow_app
MEDFLOW_DATABASE_PASSWORD=your-medflow-app-password

# Migration role (postgres — Supabase superuser, used only for migrations)
DB_MIGRATE_USER=postgres
DB_MIGRATE_PASSWORD=your-supabase-db-password

# Composed URLs (used by Makefile and services)
MIGRATE_DATABASE_URL=postgres://postgres:your-supabase-db-password@db.your-project-ref.supabase.co:5432/postgres?sslmode=require
APP_DATABASE_URL=postgres://medflow_app:your-medflow-app-password@db.your-project-ref.supabase.co:5432/postgres?sslmode=require

# Makefile overrides
DB_HOST=db.your-project-ref.supabase.co
DB_PORT=5432
DB_NAME=postgres
DB_SSL_MODE=require
DB_PASSWORD=your-supabase-db-password

# RabbitMQ (use local Docker or a cloud AMQP service)
MEDFLOW_RABBITMQ_URL=amqp://medflow:devpassword@localhost:5672/

# JWT (use a strong secret for shared environments)
MEDFLOW_JWT_SECRET=change-me-use-openssl-rand-base64-64

# Service URLs (for local development against Supabase DB)
MEDFLOW_SERVICES_AUTH_SERVICE_URL=http://localhost:8081
MEDFLOW_SERVICES_USER_SERVICE_URL=http://localhost:8082
MEDFLOW_SERVICES_STAFF_SERVICE_URL=http://localhost:8083
MEDFLOW_SERVICES_INVENTORY_SERVICE_URL=http://localhost:8084
