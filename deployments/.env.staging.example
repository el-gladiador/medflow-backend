# MedFlow Staging Environment Configuration Template
# Copy this file and fill in actual values for your staging environment
# NEVER commit actual credentials to version control

# Environment - REQUIRED
MEDFLOW_SERVER_ENVIRONMENT=staging

# Database Configuration - REQUIRED (single database, RLS-based multi-tenancy)
# Two roles:
#   medflow_staging     = superuser (migrations only, used by CI/CD pipeline)
#   medflow_staging_app = app role (services, RLS enforced)
#
# Option 1: 12-Factor style DATABASE_URL (recommended for services)
# MEDFLOW_DATABASE_URL=postgres://medflow_staging_app:<password>@medflow-staging.cluster-xxxx.eu-central-1.rds.amazonaws.com:5432/medflow?sslmode=require

# Option 2: Individual fields
# MEDFLOW_DATABASE_HOST=medflow-staging.cluster-xxxx.eu-central-1.rds.amazonaws.com
# MEDFLOW_DATABASE_PORT=5432
# MEDFLOW_DATABASE_USER=medflow_staging_app
# MEDFLOW_DATABASE_PASSWORD=<secure-password>
# MEDFLOW_DATABASE_DATABASE=medflow
# MEDFLOW_DATABASE_SSL_MODE=require

# Migration URL (superuser, used by CI/CD for schema migrations)
# MIGRATE_DATABASE_URL=postgres://medflow_staging:<password>@medflow-staging.cluster-xxxx.eu-central-1.rds.amazonaws.com:5432/medflow?sslmode=require

# RabbitMQ - REQUIRED
MEDFLOW_RABBITMQ_URL=amqps://medflow:<password>@staging-rabbitmq.eu-central-1.amazonaws.com:5671/

# JWT Secret - REQUIRED (generate with: openssl rand -base64 64)
MEDFLOW_JWT_SECRET=<generate-secure-secret-min-32-chars>

# Service URLs (internal AWS networking / ECS service discovery)
MEDFLOW_SERVICES_AUTH_SERVICE_URL=http://auth-service.medflow.local:8081
MEDFLOW_SERVICES_USER_SERVICE_URL=http://user-service.medflow.local:8082
MEDFLOW_SERVICES_STAFF_SERVICE_URL=http://staff-service.medflow.local:8083
MEDFLOW_SERVICES_INVENTORY_SERVICE_URL=http://inventory-service.medflow.local:8084

# Connection pool settings (adjust based on instance size)
MEDFLOW_DATABASE_MAX_OPEN_CONNS=25
MEDFLOW_DATABASE_MAX_IDLE_CONNS=10
MEDFLOW_DATABASE_CONN_MAX_LIFETIME=5m
